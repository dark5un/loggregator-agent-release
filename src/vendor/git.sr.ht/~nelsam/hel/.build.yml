image: archlinux

packages:
- git
- docker
- wget

sources:
- https://git.sr.ht/~nelsam/hel

tasks:
- setup-earthly: |
    sudo systemctl start docker.service
    sudo wget https://github.com/earthly/earthly/releases/download/v0.7.2/earthly-linux-amd64 -O /usr/local/bin/earthly
    sudo chmod +x /usr/local/bin/earthly
    /usr/local/bin/earthly bootstrap

- build-cli: |
    cd hel
    /usr/local/bin/earthly +build

- test: |
    cd hel
    /usr/local/bin/earthly +test
